// Lab 1-2

const PI = Math.PI;

const random = (min, max) => Math.random() * (max - min) + min;

const pushElem = (array, min, max) => {
  for (let i = 0; i < 3; i++) array.push(Number(random(min, max).toFixed(3)));
  return array;
}

// Массив а
const arrayA = [...new Array(20)].map((elem, idx) => (75 - idx * 3) / 100);

let arrayT = []; //Массив периодов
const diap = [2.093, 2.1, 2.068, 2.073, 2.052, 2.057, 2.037, 2.042, 2.021, 2.026, 2.002, 2.008, 1.991, 1.997, 1.982, 1.987, 1.972, 1.978, 1.968, 1.972, 1.964, 1.969, 1.962, 1.967, 1.971, 1.976, 1.981, 1.985, 1.998, 2.005, 2.033, 2.039, 2.078, 2.084, 2.134, 2.141, 2.228, 2.236, 2.335, 2.339]; //Диапазоны генерирования
for(let i = 0; i < 40; i += 2) pushElem(arrayT, diap[i], diap[i+1]);

const arrayAverage = [...new Array(20)].map((elem, idx) => Number(((arrayT[idx * 3 + 2] + arrayT[idx * 3 + 1] + arrayT[idx * 3]) / 3).toFixed(5))); //Массив средних значений периода

const arraySquare = [...new Array(20)].map((elem, idx) => Number((arrayA[idx] ** 2).toFixed(4))); //Массив а*а

const arraySquareT = [...new Array(20)].map((elem, idx) => Number((arrayA[idx] * arrayAverage[idx] ** 2).toFixed(4))); //Массив T*T*a

let min = 10;
let i = 0;
let a0 = 0;
const k = Number(((arraySquareT[2] - arraySquareT[5])/(arraySquare[2] - arraySquare[5])).toFixed(3));
const b = Number((arraySquareT[2] - k * arraySquare[2]).toFixed(3));
const g = Number((4 * PI * PI / k).toFixed(2));
arrayAverage.forEach(elem => elem < min ? min = elem : '')
arrayA.forEach((elem, idx) => arrayAverage[idx] === min ? i = idx : '');

console.log(arrayA);
console.log(arrayT);
console.log(arrayAverage);
console.log(arraySquare);
console.log(arraySquareT);
console.log(`Tmin === ${min}`);
console.log(`a0 === ${arrayA[i]}`);
console.log(`a0 теоретическое === 0,435`);
console.log(`k === ${k}`);
console.log(`b === ${b}`);
console.log(`g експериментальное === ${g} < 9.8 (g табличное)`);
console.log(`L експериментальное === ${Math.round(Math.sqrt(b * 3 * g / PI / PI) * 1000) / 1000} > 1.5 (L точное)`);
